/*!
 * NUO v0.0.2
 * (c) 2016 crossjs
 * Released under the MIT License.
 */
var nuo=function(){"use strict";function t(t){var e=this;if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._progress=null,this._deferreds=[],c(t,function(){for(var t=[],o=arguments.length;o--;)t[o]=arguments[o];n.apply(e,t)},function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];o.apply(e,t)},function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];r.apply(e,t)})}function e(t){var e=this;return null===this._state?(this._deferreds.push(t),void(t.onProgress&&null!==this._progress&&setImmediate(function(){t.onProgress(e._progress)}))):void setImmediate(function(){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return void(e._state?t.resolve:t.reject)(e._value);var o;try{o=n(e._value)}catch(e){return void t.reject(e)}t.resolve(o)})}function n(t){var e=this;try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var s=t.then;if("function"==typeof s)return void c(function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];s.apply(t,e)},function(){for(var t=[],o=arguments.length;o--;)t[o]=arguments[o];n.apply(e,t)},function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];o.apply(e,t)},function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];r.apply(e,t)})}this._state=!0,this._value=t,i.call(this)}catch(t){o.call(this,t)}}function o(t){this._state=!1,this._value=t,i.call(this)}function r(t){this._progress=t,i.call(this,!0)}function i(t){for(var n=this,o=0,r=this._deferreds.length;o<r;o++)e.call(n,n._deferreds[o]);t||(this._deferreds=null)}function s(t,e,n,o,r,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.onProgress="function"==typeof n?n:null,this.resolve=o,this.reject=r,this.notify=i}function c(t,e,n,o){var r=!1;try{t(function(t){r||(r=!0,e(t))},function(t){r||(r=!0,n(t))},function(t){r||o(t)})}catch(t){if(r)return;r=!0,n(t)}}return function(t,e){function n(t){var e=arguments;"function"!=typeof t&&(t=new Function(""+t));for(var n=new Array(arguments.length-1),o=0;o<n.length;o++)n[o]=e[o+1];var r={callback:t,args:n};return v[p]=r,h(p),p++}function o(t){delete v[t]}function r(t){var n=t.callback,o=t.args;switch(o.length){case 0:n();break;case 1:n(o[0]);break;case 2:n(o[0],o[1]);break;case 3:n(o[0],o[1],o[2]);break;default:n.apply(e,o)}}function i(t){if(d)setTimeout(i,0,t);else{var e=v[t];if(e){d=!0;try{r(e)}finally{o(t),d=!1}}}}function s(){h=function(t){process.nextTick(function(){i(t)})}}function c(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}function a(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&i(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),h=function(n){t.postMessage(e+n,"*")}}function u(){var t=new MessageChannel;t.port1.onmessage=function(t){var e=t.data;i(e)},h=function(e){t.port2.postMessage(e)}}function f(){var t=g.documentElement;h=function(e){var n=g.createElement("script");n.onreadystatechange=function(){i(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}function l(){h=function(t){setTimeout(i,0,t)}}if(!t.setImmediate){var h,p=1,v={},d=!1,g=t.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(t);y=y&&y.setTimeout?y:t,"[object process]"==={}.toString.call(t.process)?s():c()?a():t.MessageChannel?u():g&&"onreadystatechange"in g.createElement("script")?f():l(),y.setImmediate=n,y.clearImmediate=o}}("undefined"==typeof self?"undefined"==typeof global?void 0:global:self),global.Promise=t,t.prototype.catch=function(t){return this.then(null,t)},t.prototype.finally=function(e){return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){throw n})})},t.prototype.progress=function(t){return this.then(null,null,t)},t.prototype.then=function(n,o,r){var i=this;return new t(function(t,c,a){e.call(i,new s(n,o,r,t,c,a))})},t.resolve=function(e){return e&&"object"==typeof e&&e.constructor===t?e:new t(function(t){return t(e)})},t.reject=function(e){return new t(function(t,n){return n(e)})},t.notify=function(e){return new t(function(t,n,o){return o(e)})},t.all=function(e){return new t(function(t,n,o){function r(s,c){try{if(c&&("object"==typeof c||"function"==typeof c)){var a=c.then;if("function"==typeof a)return void a.call(c,function(t){r(s,t)},n,o)}e[s]=c,0===--i&&t(e)}catch(t){n(t)}}if(0===e.length)return t([]);for(var i=e.length,s=0;s<e.length;s++)r(s,e[s])})},t.race=function(e){return new t(function(n,o,r){for(var i=0,s=e.length;i<s;i++)t.resolve(e[i]).then(n,o,r)})},t}();